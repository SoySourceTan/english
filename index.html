<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ドラゴンクエストIII：英単語の冒険 🗡️</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet">
</head>
<body class="bg-dark text-light dq3-font">
    <div class="container mt-3">
        <h1 id="header" class="text-center mb-4">冒険をはじめる</h1>
        <div class="status-bar mb-3">
            <div class="row">
                <div class="col-md-3"><span id="level">Lv: 1</span></div>
                <div class="col-md-3"><span id="hp">HP: 30/30</span></div>
                <div class="col-md-3"><span id="mp">MP: 30/30</span></div>
                <div class="col-md-3"><span id="exp">Exp: 0/100</span></div>
            </div>
            <div class="row mt-2">
                <div class="col-md-3"><span id="gold">Gold: 0</span></div>
                <div class="col-md-3"><span id="strength">攻撃力: 10</span></div>
                <div class="col-md-3"><span id="agility">素早さ: 10</span></div>
                <div class="col-md-3"><span id="intelligence">知力: 10</span></div>
            </div>
        </div>

        <div class="text-center mb-3">
            <button id="status-btn" class="btn btn-primary">ステータス</button>
        </div>

        <div class="loading-screen">
            <p>Loading...</p>
            <div class="spinner-border text-light" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>

        <div class="voice-select mb-3">
            <label for="voiceSelect">音声選択: </label>
            <select id="voiceSelect" class="form-select d-inline-block w-auto"></select>
            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#voiceModal">音声選択</button>
        </div>

        <div class="text-center mb-3">
            <button id="start-adventure-btn" class="btn btn-success">冒険をはじめる</button>
            <button id="continue-adventure-btn" class="btn btn-success" style="display: none;">冒険を続ける</button>
        </div>

        <div class="search-bar mb-3">
            <input type="text" id="search" class="form-control" placeholder="単語を検索...">
            <div id="search-results" class="search-results"></div>
        </div>

        <div class="modal fade" id="nameModal" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content dq3-modal">
                    <div class="modal-body">
                        <p>そなたの なまえを おしえなさい。</p>
                        <input type="text" id="nameInput" class="form-control mb-3">
                        <button class="btn btn-primary">けってい</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="jobModal" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content dq3-modal">
                    <div class="modal-body">
                        <p>そなたの しょくぎょうを えらべ！</p>
                        <select id="jobSelect" class="form-select mb-3">
                            <option value="せんし">せんし</option>
                            <option value="まほうつかい">まほうつかい</option>
                            <option value="そうりょ">そうりょ</option>
                            <option value="とうぞく">とうぞく</option>
                            <option value="しょうにん">しょうにん</option>
                            <option value="あそびにん">あそびにん</option>
                            <option value="けんじゃ">けんじゃ</option>
                        </select>
                        <button class="btn btn-primary">けってい</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="voiceModal" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content dq3-modal">
                    <div class="modal-body">
                        <p>音声選択</p>
                        <select id="modalVoiceSelect" class="form-select mb-3"></select>
                        <button class="btn btn-primary">更新</button>
                        <button class="btn btn-secondary" data-bs-dismiss="modal">閉じる</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="category-list mb-3">
            <button class="btn btn-outline-light me-2" data-bs-toggle="modal" data-bs-target="#nounsModal">名詞</button>
            <button class="btn btn-outline-light me-2" data-bs-toggle="modal" data-bs-target="#verbsModal">動詞</button>
            <button class="btn btn-outline-light me-2" data-bs-toggle="modal" data-bs-target="#adjectivesModal">形容詞</button>
            <button class="btn btn-outline-light me-2" data-bs-toggle="modal" data-bs-target="#adverbsModal">副詞</button>
            <button class="btn btn-outline-light me-2" data-bs-toggle="modal" data-bs-target="#prepositionsModal">前置詞</button>
            <button class="btn btn-outline-light" data-bs-toggle="modal" data-bs-target="#phrasesModal">熟語・フレーズ</button>
        </div>

        <div class="modal fade" id="nounsModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-body">
                        <h5>名詞（900語）</h5>
                        <p>注：全900語（指導要領488語＋自然・野菜関連244語＋追加168語）。出典：文部科学省、英単語検定。</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="verbsModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-body">
                        <h5>動詞（150語）</h5>
                        <p>注：全150語（指導要領41語＋追加109語）。</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="adjectivesModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-body">
                        <h5>形容詞（200語）</h5>
                        <p>注：全200語（指導要領60語＋追加140語）。</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="adverbsModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-body">
                        <h5>副詞（80語）</h5>
                        <p>注：全80語（指導要領20語＋追加60語）。</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="prepositionsModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-body">
                        <h5>前置詞（50語）</h5>
                        <p>注：全50語（指導要領20語＋追加30語）。</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="phrasesModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-body">
                        <h5>熟語・フレーズ（175個）</h5>
                        <p>注：全175フレーズ（指導要領50＋追加125）。イギリス英語の挨拶や自然関連フレーズを追加。</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="battleModal" class="modal fade" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content dq3-modal">
                    <div class="modal-body">
                        <div id="monster-sprite"></div>
                        <div id="monster-name"></div>
                        <div id="battle-commands">
                            <button class="dq3-btn" data-command="fight">こうげき</button>
                            <button class="dq3-btn" data-command="magic">じゅもん</button>
                            <button class="dq3-btn" data-command="item">どうぐ</button>
                            <button class="dq3-btn" data-command="flee">にげる</button>
                        </div>
                        <div id="battle-choices" style="display: none;">
                            <button class="dq3-btn" data-choice="yes">はい</button>
                            <button class="dq3-btn" data-choice="no">いいえ</button>
                        </div>
                        <div id="flee-choice" style="display: none;">
                            <button class="dq3-btn" data-choice="yes">はい</button>
                            <button class="dq3-btn" data-choice="no">いいえ</button>
                        </div>
                        <div id="revive-choice" style="display: none;">
                            <button class="dq3-btn" data-choice="yes">はい</button>
                            <button class="dq3-btn" data-choice="no">いいえ</button>
                        </div>
                        <div id="end-game-choice" style="display: none;">
                            <button class="dq3-btn">OK</button>
                        </div>
                        <div id="battle-feedback" class="battle-feedback"></div>
                        <div id="quiz-options" class="quiz-options">
                            <button class="dq3-option" data-index="0">
                                <span class="option-text"></span>
                                <span class="speaker" tabindex="0" data-index="0">🔉</span>
                            </button>
                            <button class="dq3-option" data-index="1">
                                <span class="option-text"></span>
                                <span class="speaker" tabindex="0" data-index="1">🔉</span>
                            </button>
                            <button class="dq3-option" data-index="2">
                                <span class="option-text"></span>
                                <span class="speaker" tabindex="0" data-index="2">🔉</span>
                            </button>
                            <button class="dq3-option" data-index="3">
                                <span class="option-text"></span>
                                <span class="speaker" tabindex="0" data-index="3">🔉</span>
                            </button>
                        </div>
                        <div id="effectOverlay"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="spellModal" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content dq3-modal">
                    <div class="modal-body">
                        <p>どの じゅもんを つかう？</p>
                        <div id="spell-list" class="mb-3"></div>
                        <button class="btn btn-secondary" data-bs-dismiss="modal">やめる</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="categoryModal" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content dq3-modal">
                    <div class="modal-body">
                        <p>どの もんだいを えらぶ？</p>
                        <div id="category-list" class="mb-3"></div>
                        <button class="btn btn-secondary" data-bs-dismiss="modal">やめる</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="statusModal" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content dq3-modal">
                    <div class="modal-body">
                        <p id="status-text"></p>
                        <button class="btn btn-primary" data-bs-dismiss="modal">とじる</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="edit-status-modal" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content dq3-modal">
                    <div class="modal-body">
                        <h5>ステータス編集</h5>
                        <div class="mb-3">
                            <label for="editNameInput">なまえ</label>
                            <input type="text" id="editNameInput" class="form-control">
                        </div>
                        <div class="mb-3">
                            <label for="editJobSelect">しょくぎょう</label>
                            <select id="editJobSelect" class="form-select">
                                <option value="せんし">せんし</option>
                                <option value="まほうつかい">まほうつかい</option>
                                <option value="そうりょ">そうりょ</option>
                                <option value="とうぞく">とうぞく</option>
                                <option value="しょうにん">しょうにん</option>
                                <option value="あそびにん">あそびにん</option>
                                <option value="けんじゃ">けんじゃ</option>
                            </select>
                        </div>
                        <button id="reset-level-btn" class="btn btn-danger">レベルをリセット</button>
                        <button class="btn btn-secondary" data-bs-dismiss="modal">やめる</button>
                        <button class="btn btn-primary">けってい</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="resultsModal" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content dq3-modal">
                    <div class="modal-body">
                        <p>アリアハンの城に かえってきた！</p>
                        <p id="results-level"></p>
                        <p id="results-exp"></p>
                        <p id="results-gold"></p>
                        <table class="table table-dark">
                            <thead>
                                <tr>
                                    <th>もんだい</th>
                                    <th>せいかい</th>
                                    <th>そなたのこたえ</th>
                                    <th>けっか</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                        <button class="btn btn-primary">つづける</button>
                    </div>
                </div>
            </div>
        </div>

        <footer class="text-center mt-5">
            <p>© 2025 中学英語 単語・フレーズ一覧</p>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/howler@2.2.3/dist/howler.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script type="module" src="js/main.js"></script>
</body>
</html>